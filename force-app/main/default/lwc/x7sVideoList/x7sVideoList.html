<!--
 - Copyright (c) 2020.  7Summits Inc. All rights reserved.
 -->

<!-- 7S Video Gallery Plus -->
<template>
    <c-x7s-shr-component-wrapper
            class="x7s-video-list"
            description={subTitle}
            title={title}
            title-align={align}
            variant={variant}>

        <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_error slds-m-top--large"
             if:true={error} role="alert">
            <lightning-formatted-rich-text value={error}></lightning-formatted-rich-text>
        </div>

        <template if:false={error}>
            <div class="slds-grid slds-grid_vertical-align-center">
                <div class="x7s-video-list__carousel-arrow slds-col slds-grow-none slds-p-horizontal_small"
                     if:true={carouselMode}>
                    <button class={previousButtonClass} title="Previous" onclick={handlePrevious}>
                        <lightning-icon
                                alternative-text="Previous"
                                class="slds-current-color"
                                icon-name="utility:chevronleft"
                                size="small"></lightning-icon>
                    </button>
                </div>

                <div class="slds-col">
                    <div class={rowClasses}>
                        <template for:each={displayVideoGallery} for:item="video">
                            <div class={colClasses} key={video.id}>
                                <article class={videoClasses}>
                                    <div if:true={isVimeo} class="x7s-video-list__video-container">
                                        <iframe class="x7s-video-list__video-embed" frameborder="0"
                                                allowfullscreen
                                                src={video.embed_url}></iframe>
                                    </div>
                                    <div if:true={isYouTube} class="x7s-video-list__video-container">
                                        <iframe class="x7s-video-list__video-embed" frameborder="0"
                                                allowfullscreen="allowfullscreen"
                                                mozallowfullscreen="mozallowfullscreen"
                                                msallowfullscreen="msallowfullscreen"
                                                oallowfullscreen="oallowfullscreen"
                                                webkitallowfullscreen="webkitallowfullscreen"
                                                src={video.embed_url}></iframe>
                                    </div>
                                    <div if:true={isBrightcove} class="x7s-video-list__video-container">
                                        <iframe class="x7s-video-list__video-embed" frameborder="0"
                                                src={video.embed_url}></iframe>
                                    </div>
                                    <div if:true={isWistia} class="x7s-video-list__video-container">
                                        <iframe class="x7s-video-list__video-embed" frameborder="0"
                                                allowfullscreen mozallowfullscreen
                                                webkitallowfullscreen oallowfullscreen
                                                msallowfullscreen
                                                src={video.embed_url}></iframe>
                                    </div>

                                    <div class="x7s-video-list__video-title fade slds-text-heading_small slds-p-top_small slds-p-bottom_xx-small"
                                         data-video-title={video.data_attr} lwc:dom="manual"></div>
                                    <div if:false={hideDescriptions}>
                                        <div class="x7s-video-list__video-description fade slds-text-body_regular"
                                             data-video-id={video.data_attr} lwc:dom="manual"
                                             style={lineClampStyle}></div>
                                    </div>
                                </article>
                            </div>
                        </template>
                    </div>
                </div>

                <div class="x7s-video-list__carousel-arrow slds-col slds-grow-none slds-p-horizontal_small"
                     if:true={carouselMode}>
                    <button class={nextButtonClass} title="Next" onclick={handleNext}>
                        <lightning-icon
                                alternative-text="Next"
                                class="slds-current-color"
                                icon-name="utility:chevronright"
                                size="small"></lightning-icon>
                    </button>
                </div>
            </div>
        </template>

        <div if:true={displayMoreButton} slot="footer">
            <a class="slds-button slds-button_brand" href={gallaryLink} target="_blank">{moreText}</a>
        </div>

    </c-x7s-shr-component-wrapper>
</template>